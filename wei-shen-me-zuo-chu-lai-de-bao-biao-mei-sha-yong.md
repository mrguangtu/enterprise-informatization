# 为什么做出来的报表没啥用？


在高性能计算系统运营的过程中，一种经常被采用的做法是定期外发系统运营报告。这类报告的主要形式就是公布有限的几个系统运营指标，制作成条形图、饼图、折线图之类的图表。高级一点的，做一个BI系统，可以自动化的从系统中计算这样的数据。

一些超算中心往往也是这么做的，详情可以参考这里：？？

然而，在实际使用过程中，真没几个人看这个东西。换句话说，就是没啥卵用。这是一个系统运营中非常常见的误区。这是为什么呢？

有认识误区，就是观念的问题，而不是技术问题。下面我们来剖析一下为什么这件事没有用。
![任务管理器](http://osivibnve.bkt.clouddn.com/17-8-1/72679902.jpg)
Windows桌面的任务管理器，多数人都用过吧，它长这个样子。大多数人往往两类原因用这个东西，一是在系统出现异常时，会打开看看，哪个进程出问题了，把其杀掉；二是对某些程序进行评估，看看对各种资源的消耗怎么样。我们做一个思想实验，如果有人每周对你电脑的运行数据汇总分析，做一个报表，也做成很好看的条形图、饼图、折线图的展示，写成邮件发给你，你觉得这个报告怎么样？你会不会长期使用这个功能？

我相信大多数人不会觉得这有什么用。

问题不是没有数据，也不是数据没有进行分析，而是有了数据，而且经过了加工和分析，依然没有什么用。问题的原因不在数据本身，而是在于这个数据对于用户的决策是否有参考价值。当用户需要了解性能的时候，在系统出问题的时候，产生了对这些数据的需求，数据在那个时刻才有用。所以，同样的问题换到HPC系统运营的过程中，也是一样的。只有在系统出现故障的时候，这些数据才有用；只有在需要评估性能等指标的时候，这些数据才有用；...

由此，我们得到了两个原则：
1. 数据应该是被记录的。没有数据，就无法分析。
对性能的数据和业务的数据，都应该有一个“池子”，把数据装在那里。等待需要的时候分析。对于硬件的信息，可以使用cacti、ganglia等；对于业务数据，可以商用调度系统自带的数据分析平台，如IBM的RTM、Altair的PBS Analytics等，或者自建业务数据库，解决数据记录的问题。所以说，不是有了问题，再去规划收集哪些数据，而是所有的数据就在那里，有了问题直接去里面挖。
2. 数据在支持决策的那个时刻才发挥作用。
对于数据的应用，不应该为了做报表而做报表。而是应该将数据融入业务的决策过程中，发挥作用。比如，在资源不足的情况下，为了避免长期等待以至于任务延期，业务需要参考当前排队情况，估计作业计算完成的大概时间，以便选择是在HPC上排队等待计算，还是使用个人工作站计算。对于这个需求，我们就可以开发一个功能，用户只要给系统一个输入，例如告知系统可接受的最长排队序号，系统就可以从已有的数据中计算出当前将获得的排队序号并与用户的期望对比，如果超出期望，就建议用户采用本地计算。这样就将数据融入到用户的决策过程中。

更进一步，可以使用更先进的算法，比如机器学习、人工智能算法之类的技术，对决策的结果进行反馈，形成闭环，从而利用用户的反馈修正决策的精度。像下图一样，通过一些控制算法和参数，就可将信号控制在希望的值。于是，我们得到了第三个原则，*要形成闭环*。
![阻尼正弦函数曲线](http://osivibnve.bkt.clouddn.com/17-8-1/42153436.jpg)

总结一下：
1 记录数据
2 支持决策
3 形成闭环